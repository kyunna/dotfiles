README.md
bootstrap.sh

{{ $programs := dict 
    "1password" ".config/1Password/"
    "nvim" ".config/nvim/"
    "fish" ".config/fish/"
    "alacritty" ".config/alacritty/"
    "ghostty" ".config/ghostty/"
    "git" ".gitconfig"
    "tmux" ".tmux.conf"
    "starship" ".config/starship.toml"
}}
{{ $current_os := .chezmoi.os }}
{{ $is_wsl := false }}
{{ $win_username := "" }} 

{{ if eq $current_os "linux" }}
    {{ if (.chezmoi.kernel.osrelease | lower | contains "microsoft") }}
        {{ $is_wsl = true }}
        {{ $win_username = (output "powershell.exe" "-NoProfile" "-NonInteractive" "-Command" "$env:USERNAME" | trim) }}
        {{ if not $win_username }}{{ $win_username = (output "cmd.exe" "/c" "echo %USERNAME%" | trim) }}{{ end }}
    {{ end }}
{{ end }}

{{- range $program, $ignore_path := $programs }}
    {{- if eq $program "1password" }}
        {{- if not (or 
            (and (eq $current_os "darwin") (stat "/Applications/1Password.app"))
            (and (eq $current_os "linux") (stat "/opt/1Password/1password"))
            (and $is_wsl (stat (joinPath "/mnt/c" "Users" $win_username "AppData" "Local" "1Password")))
        ) }}
{{ $ignore_path }}
        {{- end }}
    {{- else if not (lookPath $program) }}
{{ $ignore_path }}
    {{- end }}
{{- end }}

{{- if not (and (eq $current_os "darwin") (lookPath "brew")) }}
.config/fish/conf.d/brew.fish
{{- end }}
